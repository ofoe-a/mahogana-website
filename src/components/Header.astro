---
const links = [
  { href: "#", label: "Home" },
  { href: "#products", label: "Products" },
  { href: "#projects", label: "Projects" },
  { href: "/blog", label: "Blog" },
];
---

<header id="navbar" class="fixed inset-x-0 top-0 z-50 transition-colors duration-500 bg-transparent">
  <nav class="mx-auto flex max-w-7xl items-center justify-between px-4 py-4">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-2">
      <img src="/images/mahogana-logo.svg" alt="Mahogana" class="h-6 md:h-8" />
    </a>

    <!-- Desktop nav -->
    <ul class="hidden md:flex items-center gap-10 text-white font-medium">
      {links.map(l => (
        <li><a href={l.href} class="hover:text-brand-gold transition-colors">{l.label}</a></li>
      ))}
    </ul>

    <!-- Desktop CTA -->
    <a href="/contact" class="hidden md:inline-flex items-center justify-center rounded-full
                             bg-brand-leaf px-5 py-2 text-white font-medium hover:opacity-90">
      Lets Talk
    </a>

    <!-- Mobile hamburger -->
    <button id="nav-toggle" aria-expanded="false" aria-controls="mobile-menu"
            class="md:hidden inline-flex h-10 w-10 items-center justify-center rounded-md
                   bg-white/10 text-white ring-1 ring-white/20 backdrop-blur hover:bg-white/20 transition">
      <!-- Hamburger / X icon -->
      <svg id="nav-icon" class="h-6 w-6 transition-transform duration-300" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path id="line1" stroke-linecap="round" stroke-width="2" d="M4 6h16" />
        <path id="line2" stroke-linecap="round" stroke-width="2" d="M4 12h16" />
        <path id="line3" stroke-linecap="round" stroke-width="2" d="M4 18h16" />
      </svg>
    </button>
  </nav>

  <!-- Mobile panel -->
  <div id="mobile-menu"
       class="md:hidden hidden overflow-hidden bg-brand-dark text-white shadow-lg
              ring-1 ring-black/10 transition-all duration-300">
    <div class="px-6 pb-6 pt-4 space-y-4">
      {links.map(l => (
        <a href={l.href} class="block text-lg py-1 hover:text-brand-gold">{l.label}</a>
      ))}
      <a href="http://wa.me/233508646084" class="mt-2 inline-flex w-full items-center justify-center rounded-full
                               bg-brand-leaf px-5 py-3 text-white font-medium hover:opacity-90">
        Lets Talk
      </a>
    </div>
  </div>
</header>

<!-- JS for scroll + menu toggle -->
<script is:inline>
  const nav = document.getElementById('navbar');
  const toggleBtn = document.getElementById('nav-toggle');
  const menu = document.getElementById('mobile-menu');
  const icon = document.getElementById('nav-icon');
  const [line1, line2, line3] = [
    document.getElementById('line1'),
    document.getElementById('line2'),
    document.getElementById('line3'),
  ];

  // Navbar color change on scroll
  const onScroll = () => {
    if (window.scrollY > 8) {
      nav.classList.add('bg-brand-brown/95','backdrop-blur','shadow');
      nav.classList.remove('bg-transparent');
    } else {
      nav.classList.remove('bg-brand-brown/95','backdrop-blur','shadow');
      nav.classList.add('bg-transparent');
    }
  };
  onScroll();
  window.addEventListener('scroll', onScroll);

  // Toggle menu and icon morph
  toggleBtn.addEventListener('click', () => {
    const isOpen = !menu.classList.contains('hidden');
    menu.classList.toggle('hidden');
    toggleBtn.setAttribute('aria-expanded', String(!isOpen));
    document.body.classList.toggle('overflow-hidden', !isOpen);

    // Animate hamburger â†’ X
    if (!isOpen) {
      line1.setAttribute('d', 'M5 5L19 19');   // diagonal line \
      line2.setAttribute('opacity', '0');      // hide middle
      line3.setAttribute('d', 'M19 5L5 19');   // diagonal line /
    } else {
      line1.setAttribute('d', 'M4 6h16');      // reset
      line2.setAttribute('opacity', '1');
      line3.setAttribute('d', 'M4 18h16');
    }
  });

  // Close menu on link click
  menu?.querySelectorAll('a').forEach(a =>
    a.addEventListener('click', () => {
      if (!menu.classList.contains('hidden')) toggleBtn.click();
    })
  );
</script>